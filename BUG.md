# 应用程序 bug 记录

## 问题 1: 主页面习惯条目的已坚持天数计算问题

### 问题描述
主页面 habit_card.dart 中的已坚持天数计算与习惯详情页面的时间轮盘逻辑不一致。

### 期望行为
主页面的已坚持天数计算应该与习惯详情页面的时间轮盘逻辑一致，或者直接调用相关数值，显示当前时间与最近标记时间的距离。

### 实际行为
尽管已经修改了 habit_card.dart 中的计算逻辑，使其与详情页面的逻辑相同，但问题仍然存在。

### 相关文件
- `lib/ui/widget/habit_card.dart` - 主页面习惯卡片组件
- `lib/ui/screen/habit_detail_screen.dart` - 习惯详情页面，包含时间轮盘逻辑

### 尝试的修复
1. 修改了 `habit_card.dart` 中的 `_getFormattedTimeSinceLastMark()` 方法，使其直接实现与时间轮盘相同的时间格式化逻辑
2. 删除了冗余的 `_formatDuration()` 方法
3. 将初始的 `latestMarkedDay` 值设置为 `widget.habit.startDate`，确保即使没有标记日期，也会使用开始日期作为默认值
4. 重新启动了应用程序以应用更改

### 状态
未解决 - 暂时不打算修复

## 问题 2: Web 服务端口占用问题

### 问题描述
当尝试在端口 8080 上启动 Web 服务时，遇到端口占用错误。

### 期望行为
Web 服务应该能够在指定端口上正常启动。

### 实际行为
端口 8080 被占用，导致服务启动失败。

### 解决方案
使用不同的端口（如 8081）启动 Web 服务。

### 状态
已解决