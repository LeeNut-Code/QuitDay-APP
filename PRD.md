# QuitDay-APP 产品需求文档 (PRD)

## 1. 产品概述
QuitDay-APP 是一款模仿 Quitzilla 的习惯追踪应用，旨在帮助用户记录和管理习惯的坚持情况，通过可视化数据和统计分析，激励用户养成良好的生活习惯。
- 产品目标：提供直观、美观的习惯追踪功能，支持多平台使用，帮助用户持续保持良好习惯。
- 目标用户：希望养成良好习惯、戒除不良习惯的用户群体。

## 2. 核心功能

### 2.1 平台适配
- 支持 Web 平台和 Android 平台。

### 2.2 数据管理
- 支持习惯数据的导入导出功能。
- 支持将数据备份到 WebDAV 服务器。

### 2.3 习惯管理
- 支持添加、编辑、删除习惯。
- 支持为习惯设置名称、开始日期、颜色和图标。

### 2.4 习惯追踪
- 显示习惯的坚持时间（天、时、分）。
- 提供轮盘可视化展示习惯坚持情况。
- 支持日历标记习惯发生日期。
- 支持重置习惯计时器。

### 2.5 数据统计
- 显示习惯的开始日期。
- 计算并显示最长、最短、平均习惯间隔。
- 显示上一次的习惯间隔。
- 记录并显示计时器重置次数。

## 3. 页面详情

### 3.1 主页面
- **布局结构**：
  - 顶部导航栏：显示应用名称 "QuitDay"，右侧设置按钮。
  - 主体内容区：以卡片形式展示已添加的习惯条目，每个条目显示习惯名称、坚持天数、节省的金钱和时间。
  - 底部浮动按钮：用于添加新习惯。
- **功能点**：
  - 点击习惯卡片进入习惯详情页面。
  - 点击设置按钮进入设置页面，包含备份与恢复功能。
  - 点击浮动按钮进入添加习惯页面。
- **配色方案**：与 Quitzilla 相似，以绿色为主色调，搭配白色和浅灰色背景。

### 3.2 添加/编辑习惯页面
- **布局结构**：
  - 顶部导航栏：显示 "添加习惯" 或 "编辑习惯" 标题。
  - 表单区域：包含习惯名称、开始日期、每次消耗的金钱、每次消耗的时间、备注、习惯颜色、习惯图标的设置。
  - 底部按钮：保存按钮。
- **功能点**：
  - 支持选择习惯颜色和图标。
  - 表单验证，确保习惯名称不为空。
  - 保存后返回主页面，并更新习惯列表。

### 3.3 习惯详情页面
- **概述界面**：
  - **顶部导航栏**：左上角返回按钮，中间习惯名称，右上角分享按钮。
  - **轮盘模块**：
    - 显示习惯坚持时间的轮盘可视化。
    - 轮盘右上角三个点按钮，点击显示时间选项菜单（24小时/3天/1周/10天/2周/1个月/3个月/6个月）。
    - 点击菜单选项后，调整轮盘显示模式为（当前习惯已坚持时间/菜单项时间），默认显示（已坚持时间/距离已坚持时间最近的未超过时间）。
  - **日历模块**：
    - 显示日历，标记习惯发生过的日期。
    - 下方长条按钮：重置计时器。
  - **底部菜单**：包含 "概述" 和 "统计" 两个选项，用于切换界面。

- **统计界面**：
  - **数据展示区**：
    - 开始日期：xxxx年x月x日 xx:xx 星期x。
    - 最长习惯间隔：x天x日x分。
    - 最短习惯间隔：x天x时x分。
    - 平均习惯间隔：x天x时x分。
    - 上一次的习惯间隔：x天x时x分。
    - 计时器重置次数：xx。

### 3.4 备份与恢复页面
- **布局结构**：
  - 顶部导航栏：显示 "备份与恢复" 标题。
  - CSV备份模块：包含导出备份和导入备份按钮。
  - WebDAV备份模块：包含服务器URL、用户名、密码输入框，以及配置WebDAV、上传到WebDAV、从WebDAV下载按钮。
- **功能点**：
  - 支持导出习惯数据为CSV文件。
  - 支持从CSV文件导入习惯数据。
  - 支持配置WebDAV服务器并进行数据备份和恢复。

## 4. 技术要求

### 4.1 技术栈
- 前端框架：Flutter
- 开发语言：Dart
- 状态管理：Provider
- 路由管理：GoRouter
- 本地存储：
  - 移动平台：SQLite
  - Web平台：localStorage
- 数据格式：CSV（用于导入导出）
- WebDAV客户端：需实现WebDAV协议的基本操作

### 4.2 平台适配
- Web平台：使用Flutter Web构建，生成静态文件部署。
- Android平台：使用Flutter Android构建，生成APK文件安装。

### 4.3 性能要求
- 应用启动时间：≤3秒（冷启动）。
- 页面切换时间：≤0.5秒。
- 数据加载时间：≤1秒（本地数据）。

### 4.4 安全要求
- WebDAV密码存储：使用安全的存储方式，避免明文存储。
- 数据传输：WebDAV操作使用HTTPS协议。

## 5. 部署与维护

### 5.1 Web平台部署
- 构建命令：`flutter build web --release`。
- 部署方式：将构建产物（build/web目录）部署到Web服务器（如Nginx、Apache）或静态网站托管服务。
- 容器化部署：可使用Docker容器化部署，示例Dockerfile：
  ```dockerfile
  FROM nginx:alpine
  COPY build/web /usr/share/nginx/html
  EXPOSE 80
  ```

### 5.2 Android平台部署
- 构建命令：`flutter build apk --release`。
- 部署方式：将生成的APK文件分发给用户安装，或发布到应用商店。

## 6. 未来扩展

### 6.1 功能扩展
- 支持习惯提醒功能（推送通知）。
- 支持多用户账户系统。
- 支持习惯数据的云端同步（除WebDAV外）。
- 支持更多习惯统计维度和可视化图表。

### 6.2 平台扩展
- 支持 iOS 平台。
- 支持 Windows、macOS、Linux 桌面平台。

## 7. 结论
QuitDay-APP 是一款功能完整、界面美观的习惯追踪应用，通过模仿 Quitzilla 的核心功能，并结合 Flutter 的跨平台特性，实现了 Web 和 Android 平台的适配。应用支持习惯的添加、编辑、删除，以及详细的统计分析，同时提供了数据备份和恢复功能，确保用户数据的安全性。

通过合理的技术选型和架构设计，QuitDay-APP 具有良好的可维护性和扩展性，能够满足用户的基本需求，并为未来的功能扩展预留了空间。